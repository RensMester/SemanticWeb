<!DOCTYPE html>
<html>
  <head>
	<link rel="stylesheet" type="text/css" href="style.css">
  </head>
	  <script src="http://code.jquery.com/jquery-latest.min.js"></script> 
	  <script src="https://maps.googleapis.com/maps/api/js"></script>
  <script>
      function initialize() {
        var mapCanvas = document.getElementById('map');
        var mapOptions = {
          center: new google.maps.LatLng(52.37, 4.9),
          zoom: 12,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(mapCanvas, mapOptions);
		var iconBase = "https://maps.google.com/mapfiles/kml/shapes/";
		
		/*
		var myLatlng = new google.maps.LatLng(52.444, 4.666);
		var marker = new google.maps.Marker({
                position: myLatlng,
                map: map,
                });
				
				$.each( data.routes[0].legs[0].steps, function(i, value) {
				console.log(i,value);
                var myLatlng = new google.maps.LatLng(value.start_location.lat, value.start_location.lng);
                var marker = new google.maps.Marker({
                position: myLatlng,
                map: map,
               
                });
				
				$.each( data, function(i, value) {
				
                var myLatlng = new google.maps.LatLng(value.lat, value.lon);
                var marker = new google.maps.Marker({
                position: myLatlng,
                map: map,
               
                });

            });
		*/
		
		
		var route = {{route}};
		var on_route = {{on_route}};
		var circles = {{circles}};
		
		function drawRoute(route, color) { 
            
			//MARKERS
			
			$.each( route.steps, function(i, value) {
				console.log(i,value);
                var myLatlng = new google.maps.LatLng(value.start_location.lat, value.start_location.lng);
                var marker = new google.maps.Marker({
                position: myLatlng,
                map: map,
				icon: iconBase + color
               
               });
			});
		};

		
		function drawCircles(circles) {
			
			//CIRCLES


			$.each (circles, function(i, value) {
				// Add the circle for this city to the map.
				var myLatlng = new google.maps.LatLng(value.lat, value.lon);
				var cityCircle = new google.maps.Circle({
				  strokeColor: "#FF0000",
				  strokeOpacity: 0.8,
				  strokeWeight: 2,
				  fillColor: "#FF0000",
				  fillOpacity: 0.35,
				  map: map,
				  
				  center: myLatlng,
				  radius: 125
				});
			});

		};
		
		
		
      }
	  drawMarkers(route, "schools_maps.png");
	  drawCircles(circles);
	  drawRoute(on_route);
      google.maps.event.addDomListener(window, "load", initialize);
    </script>
  
  <body>
    <div id="map"></div>
  </body>
</html>